# matjak_dashboard

{% for area in _global.registry.areas %}
- !include
    - ../templates/yaml/grid.yaml
    - title: {{ area.name }}
      icon: {{ _global.registry.areas.get_area_icon(area) }}
      path: areas_{{ area.id }}
      back_url: areas
      visible: false
      cards:
        {% set entities = _global.registry.entities.get_by_area(area) %}
        {% for domain in _global.config.area_highlighted_domains %}
        {% set domain_entities = entities | selectattr("domain", "eq", domain) | list %}
        {% if domain_entities | count > 0 %}
        - type: entities
          card_mod:
            class: layout-grid-square
          title: {{ _global.translations["domain_title_" ~ domain] | default(domain) }}
          entities:
            {% for entity in domain_entities %}
            - type: custom:button-card
              template: {{ _global.get_button_card_template(entity) }}
              entity: {{ entity.entity_id }}
              name: {{ _global.registry.entities.get_entity_name(entity, area.name) }}
            {% endfor %}
        {% endif %}
        {% endfor %}


        {% set other_entities = entities | rejectattr("domain", "in", _global.config.area_highlighted_domains) | list %}
        {% if other_entities | count > 0 %}
        - type: entities
          card_mod:
            class: layout-grid-square
          title: {{ _global.translations.domain_title_other }}
          entities:
            {% for entity in other_entities %}
            - type: custom:button-card
              template: {{ _global.get_button_card_template(entity) }}
              entity: {{ entity.entity_id }}
              name: {{ _global.registry.entities.get_entity_name(entity, area.name) }}
            {% endfor %}
        {% endif %}
{% endfor %}