tesla_car_map:
  show_icon: false
  show_name: false
  show_state: false

  variables:
    mj_parking_brake_entity: null
    mj_range_left_entity: null
    mj_mileage_entity: null

  styles:
    card:
      - padding: 0
    grid:
      - grid-template: >
          "driving_status range_left mileage"
          "map map map" / 1fr 1fr 1fr
  custom_fields:
    driving_status:
      card:
        type: custom:button-card
        template: tesla_driving_status
        entity: "[[[ return variables.mj_parking_brake_entity; ]]]"
        variables:
          mj_center_items: true
          mj_is_nested: true
          mj_replace_name_with_label: true
          mj_swap_name_state: true
        show_last_changed: true
        state_display: "[[[ return entity.state == 'on' ? 'Parked' : 'Driving'; ]]]"
        icon: "[[[ return entity.state == 'on' ? 'mdi:car-brake-parking' : 'mdi:car'; ]]]"
        styles:
          card:
            - --button-card-background-color-off: var(--color-red)
            - --button-card-background-color-on: var(--color-green)
            - border-bottom-left-radius: 0
            - border-bottom-right-radius: 0
            - border-top-right-radius: 0

    range_left:
      card:
        type: custom:button-card
        template: tesla_range_left
        entity: "[[[ return variables.mj_range_left_entity; ]]]"
        variables:
          mj_center_items: true
          mj_is_nested: true
          mj_swap_name_state: true
        styles:
          card:
            - --icon-color: var(--color-red)
            - border-radius: 0
        state:
          - operator: ">="
            value: 300
            styles:
              card:
                - --icon-color: var(--color-green)
          - operator: ">="
            value: 150
            styles:
              card:
                - --icon-color: var(--color-yellow)

    mileage:
      card:
        type: custom:button-card
        template: generic_card
        entity: "[[[ return variables.mj_mileage_entity; ]]]"
        variables:
          mj_is_nested: true
          mj_center_items: true
          mj_swap_name_state: true
        styles:
          card:
            - --button-card-background-color-off: var(--button-card-background-color-on)
            - border-bottom-left-radius: 0
            - border-bottom-right-radius: 0
            - border-top-left-radius: 0
    map:
      card:
        type: map
        aspect_ratio: 16x9
        entities:
          - "[[[ return entity.entity_id; ]]]"
        card_mod:
          style:
            .: |
              ha-card {
                border-radius: 0;
                box-shadow: none;
              }
            ha-map$: |
              .leaflet-bottom.leaflet-right {
                display: none;
              }