global_covers:
  template: generic_card
  triggers_update: all

  variables:
    mj_hide_controls_icon: true
    mj_rows:
      - controls

  icon: mdi:window-shutter
  name: Covers
  state_display: >
    [[[
      const covers = Object.values(states).filter(item => item.entity_id.split(".")[0] == "cover");
      return `${covers.length} ${covers.length == 1 ? "Cover" : "Covers"}`;
    ]]]

  styles:
    card:
      - --icon-color: var(--color-blue)

  custom_fields:
    controls:
      card:
        type: custom:layout-card
        layout_type: grid
        layout:
          grid-gap: var(--grid-gap)
          grid-template-columns: 1fr 1fr 1fr
          margin: 0
          padding: 0
        cards:
          - type: custom:button-card
            template: generic_card_button
            show_label: "[[[ return variables.mj_hide_controls_icon; ]]]"
            label: Close
            icon: "[[[ return variables.mj_hide_controls_icon ? '' : 'mdi:arrow-down-thick'; ]]]"
            tap_action:
              action: call-service
              service: cover.close_cover
              service_data:
                entity_id: all

          - type: custom:button-card
            template: generic_card_button
            show_label: "[[[ return variables.mj_hide_controls_icon; ]]]"
            label: Stop
            icon: "[[[ return variables.mj_hide_controls_icon ? '' : 'mdi:stop'; ]]]"
            tap_action:
              action: call-service
              service: cover.stop_cover
              service_data:
                entity_id: all

          - type: custom:button-card
            template: generic_card_button
            show_label: "[[[ return variables.mj_hide_controls_icon; ]]]"
            label: Open
            icon: "[[[ return variables.mj_hide_controls_icon ? '' : 'mdi:arrow-up-thick'; ]]]"
            tap_action:
              action: call-service
              service: cover.open_cover
              service_data:
                entity_id: all